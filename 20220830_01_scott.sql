SELECT USER
FROM DUAL;
--==>> SCOTT

-- 제약조건 비활성화(제약 조건이 있는상태에서 일시정지)
ALTER TABLE 테이블명
DISABLE CONSTRAINT CONSTRAINT명;


-- 제약조건 활성화(일시정지 해제)
ALTER TABLE 테이블명
ENABLE CONSTRAINT CONSTRAINT명;




--------------------------------------------------------------------------------

-- ■■■ UPDATE ■■■ --

-- 1. 테이블에서 기존 데이터를 수정(변경)하는 구문

-- 2. 형식 및 구조
-- UPDATE 테이블명
-- SET 컬럼명=변경할값[, 컬럼명=변경할 값, ....]
-- [WHERE 조건절]

-- WHERE 조건 절은 없을수 있다 즉, 안에 데이터를 모둔 바꿔야 할 상황이다.


SELECT *
FROM TBL_SAWON;
/*
1001	고연수	9409252234567	2005/01/03	3000
1002	김보경	9809022234567	    1999/11/23	2000
1003	정미경	9810092234567	2006/08/10	4000
1004	김인교	9307131234567	1998/05/13	2000
1005	이정재	7008161234567	1998/05/13	1000
1006	아이유	9309302234567	    1999/10/10	3000
1007	이하이	0302064234567	    2010/10/23	4000
1008	인순이	6807102234567	1998/03/20	1500
1009	선동렬	6710261234567	1998/03/20	1300
1010	선우용녀	6511022234567	1998/12/20	2600
1011	선우선	0506174234567	2011/10/10	1300
1012	남궁민	0102033234567   	2010/10/10	2400
1013	남진	    0210303234567   	2011/10/10	2800
1014	반보영	9903142234567	2012/11/11	5200
1015	한은영	9907292234567	2012/11/11	5200
1016	이이경	0605063234567   	2015/01/20	1500
*/



--○ TBL_SAWON 테이블에서 사원번호 1004번 사원의
-- 주민번호를 『8805251234567』 로 수정한다.


UPDATE TBL_SAWON
SET JUBUN = 8805251234567;
WHERE JUBUN = 9307131234567;

ROLLBACK;

SELECT *
FROM TBL_SAWON;

UPDATE TBL_SAWON
SET JUBUN = 8805251234567
WHERE SANO = 1004;
--==>> 1 행 이(가) 업데이트되었습니다.

UPDATE TBL_SAWON
SET JUBUN = 8805251234567
WHERE SANO = 1004;


DESC TBL_SAWON;

UPDATE TBL_SAWON
SET JUBUN = '8805251234567'
WHERE SANO = 1004;
--==>> 1 행 이(가) 업데이트되었습니다.


------ T 선생님--------
UPDATE TBL_SAWON
SET JUBUN = '8805251234567'
WHERE SANO = 1004;

-- 즉 선택조건과 변견하고자하는 데이터는 다를때가 많다.


-- 확인 
SELECT *
FROM TBL_SAWON;
/*
1001	고연수	9409252234567	2005/01/03	3000
1002	김보경	9809022234567	    1999/11/23	2000
1003	정미경	9810092234567	2006/08/10	4000
1004	김인교	8805251234567◀	1998/05/13	2000     
1005	이정재	7008161234567	1998/05/13	1000
1006	아이유	9309302234567   	1999/10/10	3000
1007	이하이	0302064234567	    2010/10/23	4000
1008	인순이	6807102234567	1998/03/20	1500
1009	선동렬	6710261234567	1998/03/20	1300
1010	선우용녀	6511022234567	1998/12/20	2600
1011	선우선	0506174234567	2011/10/10	1300
1012	남궁민	0102033234567	    2010/10/10	2400
1013	남진	    0210303234567   	2011/10/10	2800
1014	반보영	9903142234567	2012/11/11	5200
1015	한은영	9907292234567	2012/11/11	5200
1016	이이경	0605063234567	    2015/01/20	1500
*/

-- 실행 후 COMMIT 또는 ROLLBACK 을 반드시 선택적으로 실행
COMMIT;
--==>> 커밋 완료.

--○ TBL_SAWON 테이블에서 1005번 사원의 입사일과 급여를
-- 각각 2020-04-01, 1200 으로 변경한다.


-- 내가 한 것
UPDATE TBL_SAWON
SET HIREDATE = '2022-04-01'
WHERE 1005;


UPDATE TBL_SAWON
SET SAL = 1200  
WHERE 1005;  

DESC TBL_SAWON;
-------------------- T 선생님
UPDATE TBL_SAWON
SET HIREDATE = TO_DATE('2022-04-01','YYYY-MM-DD'), SAL = 1200
WHERE SANO = 1005;
--==>> 1 행 이(가) 업데이트되었습니다.

-- TO_DATE 데이터 타입 맞춰줘야한다.

DESC TBL_SAWON;
/*
이름     널? 유형           
-------- -- ------------ 
SANO        NUMBER(4)    
SANAME      VARCHAR2(30) 
JUBUN       CHAR(13)     
HIREDATE    DATE         
SAL         NUMBER(10) 
*/

COMMIT;
--==>> 커밋 완료.




--○ TBL_INSA 테이블 복사( 데이터만...)
CREATE TABLE TBL_INSABACKUP
AS
SELECT *
FROM TBL_INSA;
--==>> Table TBL_INSABACKUP이(가) 생성되었습니다.

-- ○ TBL_INSABACKUP 테이블에서
-- 직위가 과장과 부장만 수당 10% 인상 DO
SELECT *
FROM TBL_INSABACKUP;


SELECT *
FROM TBL_INSABACKUP
WHERE JIKWI IN('과장','부장');

-- 오타........
SELECT (SUDANG + (SUDAND * 0.1)) "수당 10% 인상"
FROM TBL_INSABACKUP
WHERE JIKWI IN('과장','부장');



SELECT SUDANG + (SUDANG * 0.1) "수당 10% 인상"
FROM TBL_INSABACKUP
WHERE JIKWI IN('과장','부장');




---- T 선생님
SELECT NAME"사원명", JIKWI"직위", SUDANG"수당"
     , SUDANG + (SUDANG * 0.1) "10% 인상된 수당A"
     , SUDANG * 1.1  "10% 인상된 수당B"
FROM TBL_INSABACKUP
WHERE JIKWI IN('과장','부장');




UPDATE TBL_INSABACKUP
SET SUDANG = SUDANG *1.1
WHERE JIKWI IN('과장','부장');
--==>> 15개 행 이(가) 업데이트되었습니다.

SELECT *
FROM TBL_INSABACKUP;
--==>> 15개 행 이(가) 업데이트되었습니다.


COMMIT;
--==>>커밋 완료.


-- ○ TBL_INSABACKUP 테이블에서
-- 전화번호가 016, 017, 018, 019 로 시작하는 전화번호인 경우
-- 이를 모두 010 으로 변경한다.

UPDATE TBL_INSAUPDATE
SET 010으로 변경
WHERE 전화번호 시작이 106,107,108,019



UPDATE TBL_INSABACKUP
SET TEL = '010'
WHERE TEL IN ('016', '017','108','109');


DESC TBL_INSABACKUP;


SELECT *
FROM TBL_INSABACKUP
WHERE TEL IN ('016', '017', '108', '109');


SELECT *
FROM TBL_INSABACKUP
WHERE TEL LIKE IN('016__________', '017__________', '108__________', '109__________');


SELECT *
FROM TBL_INSABACKUP
WHERE TEL LIKE '019%';

SELECT *
FROM TBL_INSABACKUP
WHERE TEL LIKE '018%';


UPDATE TBL_INSABACKUP
SET TEL = '010%'
WHERE TEL LIKE '019%';

SELECT *
FROM TBL_INSABACKUP
WHERE TEL LIKE '019%';


ROLLBACK;

UPDATE TBL_INSABACKUP
SET TEL = '010%'
WHERE TEL LIKE '019%';
--==>> 6개 행 이(가) 업데이트되었습니다.

UPDATE TBL_INSABACKUP
SET TEL = '010%'
WHERE TEL LIKE '018%';
--==>> 4개 행 이(가) 업데이트되었습니다.
UPDATE TBL_INSABACKUP
SET TEL = '010%'
WHERE TEL LIKE '017%';
--==>> 3개 행 이(가) 업데이트되었습니다.
UPDATE TBL_INSABACKUP
SET TEL = '010%'
WHERE TEL LIKE '016%';
--==>> 11개 행 이(가) 업데이트되었습니다.


UPDATE TBL_INSABACKUP
SET TEL = '010%'
WHERE TEL LIKE IN ('106%','107%','108%','019%');
--==>> 잘못된 표현

-------------- 확인 및 T
SELECT *
FROM TBL_INSABACKUP;




SELECT *
FROM TBL_INSABACKUP
WHERE TEL IN('016','017','108','019');
--==>> 조회 결과 없음


SELECT *
FROM TBL_INSABACKUP
WHERE SUBSTR(TEL, 1, 3) IN ('016','017','108','019');

/*
1004	김정훈	790304-1788896	2000-10-01	전북	019-5236-4221	영업부	대리	1954200	170000
1008	김영년	821011-2362514	2002-04-30	서울	016-2222-4444	홍보부	사원	950000	145000
1009	나윤균	810810-1552147	2003-10-10	경기	019-1111-2222	인사부	사원	840000	220400
1013	조미숙	790102-2777777	1998-06-07	경기	019-6666-4444	홍보부	대리	1601000	103000
1015	이현숙	800606-2954687	1999-07-26	경기	016-2548-3365	총무부	사원	1050000	104000
1019	박문수	780710-1985632	1999-12-10	서울	017-4747-4848	인사부	과장	2300000	181500
1022	이영숙	800501-2312456	2003-02-25	전남	017-5214-5282	기획부	대리	1960000	180000
1027	김영길	801216-1898752	2000-10-18	서울	019-8523-1478	총무부	과장	2340000	187000
1028	이남신	810101-1010101	2001-09-07	제주	016-1818-4848	인사부	사원	892000	110000
1029	김말숙	800301-2020202	2000-09-08	서울	016-3535-3636	총무부	사원	920000	124000
1030	정정해	790210-2101010	1999-10-17	부산	019-6564-6752	총무부	과장	2304000	136400
1031	지재환	771115-1687988	2001-01-21	서울	019-5552-7511	기획부	부장	2450000	176000
1032	심심해	810206-2222222	2000-05-05	전북	016-8888-7474	자재부	사원	880000	108000
1040	박세열	790509-1635214	2000-09-10	경북	016-4444-7777	인사부	대리	2100000	130000
1041	문길수	721217-1951357	2001-12-10	충남	016-4444-5555	자재부	과장	2300000	165000
1043	양미옥	830504-2471523	2003-09-24	서울	016-8548-6547	영업부	사원	1100000	210000
1046	허경운	760105-1458752	1999-05-04	경남	017-3333-3333	총무부	부장	2650000	165000
1054	정상호	810705-1212141	1999-10-16	강원	016-1919-4242	홍보부	사원	980000	114000
1055	정한나	820506-2425153	2004-06-07	서울	016-2424-4242	영업부	사원	1000000	104000
1057	이미경	780406-2003214	1998-02-11	경기	016-6542-7546	자재부	부장	2520000	176000
*/


SELECT TEL"기존전화번호" , 010||TEL "변경전화번호"
FROM TBL_INSABACKUP
WHERE SUBSTR(TEL, 1, 3) IN ('016','017','108','019');



SELECT TEL"기존전화번호" , '010' || SUBSTR(TEL,4) "변경전화번호"
FROM TBL_INSABACKUP
WHERE SUBSTR(TEL, 1, 3) IN ('016','017','108','019');


UPDATE TBL_INSABACKUP
SET TEL = '010' || SUBSTR(TEL,4)
WHERE SUBSTR(TEL, 1, 3) IN ('016','017','018','019');


--==>> 24개 행 이(가) 업데이트되었습니다. 
]

SELECT *
FROM TBL_INSABACKUP;


COMMIT;
--==>> 커밋 완료.